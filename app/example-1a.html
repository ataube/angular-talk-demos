<!DOCTYPE html>
<html ng-app>
<head>
	<title>AngularJS - Example 1a</title>
	<link rel="stylesheet" href="/styles/main.css">
</head>
<body>

	<div class="container" style="margin-top:50px">
      <div class="hero-unit">
          <div id="headerView"></div>

          <br>

          <form class="form-horizontal">

            <div class="control-group">
              <label class="control-label" for="inputEmail">Firstname</label>
              <div class="controls">
                <input type="text" id="firstNameInput">
              </div>
            </div>

            <div class="control-group">
              <label class="control-label" for="inputEmail">Lastname</label>
              <div class="controls">
                <input type="text" id="lastNameInput">
              </div>
            </div>
          </form> 

        <br><br>

         <div id="modelContentView"></div>

      </div>
    </div>

    <script src="/scripts/vendor/jquery.min.js"></script>
    <script src="/scripts/vendor/underscore/underscore.js"></script>
    <script src="/scripts/vendor/backbone/backbone.js"></script>

    <script type="text/javascript">
        (function() {

            var UserModel = Backbone.Model.extend({

              defaults: {
                'firstName': '',
                'lastName': ''
              }

            });

            var TitleView = Backbone.View.extend({

              tagName: 'h1',

              initialize: function() {
                this.userModel = this.options.userModel;
                this.userModel.on('change', this.render, this);
              },

              render: function() {
                $(this.el).text(this.userModel.get('firstName') + ' ' + this.userModel.get('lastName'));
                return this;
              }

            });

            var ModelContentView = Backbone.View.extend({

              tagName: 'pre',

              initialize: function() {
                this.userModel = this.options.userModel;
                this.userModel.on('change', this.render, this);
              },

              render: function() {
                $(this.el).text(JSON.stringify(this.userModel.toJSON()));
                return this;
              }

            });

            var userModel = new UserModel();
            var titleView = new TitleView({userModel: userModel});
            var modelContentView = new ModelContentView({userModel: userModel});

            $('#firstNameInput').keyup(function(e) {
              userModel.set('firstName', $(e.target).val());
            });

            $('#lastNameInput').keyup(function(e) {
              userModel.set('lastName', $(e.target).val());
            });

            $('#headerView').html(titleView.render().el);
            $('#modelContentView').html(modelContentView.render().el);


        }).apply(this);
    </script>

</body>
</html>